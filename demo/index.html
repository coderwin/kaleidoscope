<!DOCTYPE html>
<html>

  <head lang="en">
    <meta charset="utf-8">
    <title>Custom Plunker</title>
    <style>
      body {
        margin: 0;
        background: #BADA55;
      }
    </style>
  </head>

  <body>
    <script src="snapshot.withDeps.js"></script>
    <canvas id="canvas"></canvas>
    <script>
      // TODO: Use CSS flex-box system or similar for SUPER easy gridding (might just grid the canvas' themself)
      // TODO The gridding system could be a repo too >_<
      (function () {

      function Kaleidoscope(rows, cols) {
        this.rows = rows;
        this.cols = cols;
      }
      Kaleidoscope.prototype = {
        'set': function (location, options) {
          // Create an image

          // Draw it at the location

        }
      };

      // Set up the canvas dimensions
      var canvas = document.getElementById('canvas'),
          context = canvas.getContext('2d'),
          innerWidth = window.innerWidth,
          innerHeight = window.innerHeight;
      canvas.width = window.innerWidth - 10;
      canvas.height = window.innerHeight - 10;

      // Get the image
      snapshot('upper.left.html', function (err, img) {
        // If there is an error, log it
        if (err) { return console.error(err); }

        // Otherwise, add the image to the canvas
        context.drawImage(img, 0, 0, innerWidth / 3, innerHeight / 3);
      });

      // Get the image
      snapshot('upper.center.html', function (err, img) {
        // If there is an error, log it
        if (err) { return console.error(err); }

        // Otherwise, add the image to the canvas
        context.drawImage(img, innerWidth / 3, 0, innerWidth / 3, innerHeight / 3);
      });

      // Get the image
      snapshot('upper.left.html', function (err, img) {
        // If there is an error, log it
        if (err) { return console.error(err); }

        // Otherwise, add the image to the canvas
        context.drawImage(img, 2 * innerWidth / 3, 0, innerWidth / 3, innerHeight / 3);
      });


      }());
    </script>

    <script src="watcher.js"></script>
    <script src="collector.js"></script>
    <script>
        (function () {
           var watcher = new FileWatcher(),
               resources = ResourceCollector.collect();
           watcher.addListener(function () {
             location.reload();
           });
           watcher.watch(resources);
        }());
    </script>
  </body>

</html>